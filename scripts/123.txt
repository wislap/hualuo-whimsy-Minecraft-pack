mods.extendedcrafting.TableCrafting.addShapeless(0, <>, [<ecoaeextension:ecalculator_cell_drive>, <ecoaeextension:ecalculator_transmitter_bus>, <ecoaeextension:efabricator_me_channel>, <ecoaeextension:estorage_me_channel>, 
 <ecoaeextension:estorage_cell_drive>, <ecoaeextension:ecalculator_me_channel>, <ecoaeextension:efabricator_pattern_bus>, <ecoaeextension:efabricator_vent>, <ecoaeextension:estorage_casing>, <ecoaeextension:estorage_vent>,
 <ecoaeextension:ecalculator_casing>, <ecoaeextension:efabricator_casing>, <ecoaeextension:estorage_cell_item_16m>, <ecoaeextension:estorage_cell_item_64m>, <ecoaeextension:estorage_cell_item_256m>,
 <ecoaeextension:estorage_cell_fluid_16m>, <ecoaeextension:estorage_cell_fluid_64m>, <ecoaeextension:estorage_cell_fluid_256m>, <ecoaeextension:estorage_cell_gas_16m>, <ecoaeextension:estorage_cell_gas_64m>,
 <ecoaeextension:estorage_cell_gas_256m>, <ecoaeextension:ecalculator_thread_core_hyper_l4>, <ecoaeextension:ecalculator_thread_core_hyper_l6>, <ecoaeextension:ecalculator_thread_core_hyper_l9>,
 <ecoaeextension:ecalculator_tail_l4>, <ecoaeextension:ecalculator_tail_l6>, <ecoaeextension:ecalculator_tail_l9>, <ecoaeextension:ecalculator_thread_core_l4>, <ecoaeextension:ecalculator_thread_core_l6>,
 <ecoaeextension:ecalculator_thread_core_l9>, <ecoaeextension:efabricator_parallel_proc_l4>, <ecoaeextension:efabricator_parallel_proc_l6>, <ecoaeextension:efabricator_parallel_proc_l9>,
 <ecoaeextension:estorage_energy_cell_l4>, <ecoaeextension:estorage_energy_cell_l6>, <ecoaeextension:estorage_energy_cell_l9>, <ecoaeextension:extendable_calculator_subsystem_l4>,
 <ecoaeextension:extendable_calculator_subsystem_l6>, <ecoaeextension:extendable_calculator_subsystem_l9>, <ecoaeextension:ecalculator_parallel_proc_l4>, <ecoaeextension:ecalculator_parallel_proc_l6>,
 <ecoaeextension:ecalculator_parallel_proc_l9>, <ecoaeextension:extendable_fabricator_subsystem_l4>, <ecoaeextension:extendable_fabricator_subsystem_l6>, <ecoaeextension:extendable_fabricator_subsystem_l9>,
 <ecoaeextension:extendable_digital_storage_subsystem_l4>, <ecoaeextension:extendable_digital_storage_subsystem_l6>, 
 <ecoaeextension:extendable_digital_storage_subsystem_l9>, <ecoaeextension:ecalculator_cell_64m>, <ecoaeextension:ecalculator_cell_1024m>, <ecoaeextension:ecalculator_cell_16384m>]);



 RecipeBuilder.newBuilder("createmanipulator_","createmanipulator",7200)
	.addEnergyPerTickInput(1000000)
	.addItemInputs([
		
	])
	.addItemOutput(*1)
	.build();

    mods.extendedcrafting.TableCrafting.addShaped(0, <>, [
	[<ore:netherStar>, <mekanism:cosmicalloy>, <storagedrawers:upgrade_storage:4>], 
	[null, null, null], 
	[null, null, null]
]);

mods.extendedcrafting.TableCrafting.addShaped(0, <>, [
	[<iceandfire:dragon_meal>, <iceandfire:sickly_dragon_meal>, <draconicevolution:dragon_heart>], 
	[<mekanism:cosmicalloy>, null, null], 
	[null, null, null]
]);
mods.extendedcrafting.TableCrafting.addShaped(0, <>, [
	[<extrabotany:blockorichalcos>, <mekanism:controlcircuit:4>, <ore:blockVoid>], 
	[<draconicevolution:chaotic_core>, <botania:manatablet>, null], 
	[null, null, null]
]);

mods.extendedcrafting.TableCrafting.addShaped(0, <>, [
	[<mekanism:cosmicalloy>, <minecraft:skull:3>, <tconevo:material>], 
	[null, null, null], 
	[null, null, null]
]);




<galacticraftcore:meteoric_iron_raw>
<quark:biotite_ore>
<galacticraftcore:basic_block_core:7>
<galacticraftcore:basic_block_core:8>
<iceandfire:sapphire_ore>
<mekanism:oreblock>
<mekanism:oreblock:3>
<ic2:resource:4>
<thermalfoundation:ore_fluid:4>
<tconstruct:ore:1>
<tconstruct:ore>
<thermalfoundation:ore:5>
<thermalfoundation:ore:7>
<thermalfoundation:ore:4>
<thermalfoundation:ore:6>
<thermalfoundation:ore:8>
<abyssalcraft:abyore>
<abyssalcraft:coraliumore>
<mets:niobium_ore>
<abyssalcraft:nitreore>
<moretcon:oreetherstone>
<sakura:sakura_diamond_ore>
<thaumcraft:ore_cinnabar>
<thaumcraft:ore_amber>
<thaumcraft:ore_quartz>
<moretcon:oreenderal>
<moretcon:oregarstone>
<moretcon:oregallium>
<moretcon:oreechostone>
<moretcon:oreirradium>
<moretcon:orevoidspar>
<moretcon:oreigniglomerate>
<moretcon:oreebonite>
<moretcon:oreerythynite>
<moretcon:oregravitoniumdense>
<moretcon:orebloodstone>
<minecraft:lapis_ore>
<minecraft:redstone_ore>
<minecraft:coal_ore>
<appliedenergistics2:quartz_ore>
<rftools:dimensional_shard_ore>
<moretcon:orefusionite>
<appliedenergistics2:charged_quartz_ore>
<mets:titanium_ore>
<draconicevolution:draconium_ore>
<thermalfoundation:ore:1>
<thermalfoundation:ore>
<minecraft:iron_ore>
<thermalfoundation:ore:3>
<thermalfoundation:ore:2>
<minecraft:gold_ore>
<minecraft:quartz_ore>
<minecraft:emerald_ore>
<minecraft:diamond_ore>


MMEvents.onControllerGUIRender("TMSR",function(event as ControllerGUIRenderEvent){
    val ctrl = event.controller;
    val data = ctrl.customData;
    val dData = D(data);
    val Thconcentration= dData.getLong("Thconcentration",0);
    val Uconcentration= dData.getLong("Uconcentration",0);
    val scrapsconcentration= dData.getLong("scrapsconcentration",0);
    val heat= dData.getLong("heat",0);
    val ctrltion = dData.getLong("ctrltion",0);
    var info as string[] = [];
    info += "—————————堆芯参数—————————";
    info +=    "钍-232浓度:" + Thconcentration +"%";
    info +=    "铀-233浓度:" + Uconcentration +"%";
    info +=    "核废料浓度:" + scrapsconcentration +"%";
    info +=    "当前温度:"+heat+"K";
    info +=    "反应速率:"+ctrltion+"%";
    info += "—————————产出监控—————————";
    info += "   产出速率:"+heat*200+"mb/t";
    event.extraInfo = info;
    });


	//RecipeBuilder.newBuilder("EnergyInput","EC",1)
    //    .addEnergyPerTickInput(energyin)
    //    .addPreCheckHandler(function(event as RecipeCheckEvent){
    //        val data = event.controller.customData;/
    //        //获得控制器的自定义nbt，
    //        var dData = D(data);
    //        //将自定义nbt转化为容易以代码进行交互的形式
    //        var energy = dData.getLong("energy",0);
        //获得被命名为energy的自定义nbt，返回值的类型为long，如果尚不存在则会定义为零
    //        if((energy + energyin) > maxenergy){
    //            event.setFailed("电量存储已达极限！");
            //当已有电量加上输入电量会超过上限时则不会输入电量
    //        }
    //    })
    //    .addFactoryFinishHandler(function(event as FactoryRecipeFinishEvent){
    //        val data = event.controller.customData;
    //        var dData = D(data);
    //        val map = data.asMap();//将自定义nbt的结构转化为一个map，以方便后续读写
    //        var energy = dData.getLong("energy",0);
    //        map["energy"] = energy + energyin;
        //将map之中的energy这个部分加上energyin的数值
    //        event.controller.customData = data;
        //同步数值，如果没有这一步，自定义nbt不会改变
    //    })
    //    .setThreadName("电量输入")
    //让本配方只能在这个线程之中运行
    //    .build();


//RecipeBuilder.newBuilder("EnergyOutput","EC",1)
    //    .addInputs([
    //        <minecraft:coal> * 256,
    //    ])
    //    .addOutput(<minecraft:diamond_block>)
    //    .addPreCheckHandler(function(event as RecipeCheckEvent){
    //        val data = event.controller.customData;
    //        var dData = D(data);
    //        var energy = dData.getLong("energy",0);
    //        val map = data.asMap();
    //        if(energy < 5000000){
    //            event.setFailed("能量存储不够！");
    //        }else{
    //            map["energy"] = energy - 250000;
    //        }
    //        event.controller.customData = data;
    //    })
    //    .addRecipeTooltip("需要存储5M的电量","会消耗250k的电量")
    //在JEI的配方显示之中给这个配方添加一个介绍，输入输出电量的部分也可以添加类似的介绍
    //中间以,分隔的两个介绍会分开成两行，可以用以避免配方页面过长，不方便观看
    //    .setThreadName("能量聚合")
    //前面的输入输出已经限制在了特定的线程之中，并且对应的线程也只能运行这两个配方，所以其实这里可以不添加这部分
    //    .build()

RecipeBuilder.newBuilder("nuclear_input","TMSR",200)
    .addInputs([
        <liquid:fuel_tbu_fluoride_flibe>*2304
    ]).addPreCheckHandler(function(event as RecipeCheckEvent){
        val data = event.controller.customData;
        var dData = D(data);
        var maxcapacity = dData.gelong("maxcapacity",0);
        var Thconcentration = dData.getLong("Thconcentration",0);
        var Uconcentration = dData.getLong("Uconcentration",0);
        var scrapsconcentration = dData.getLong("scrapsconcentration",0);
        val map = data.asMap();
        if(Thconcentration + Uconcentration + scrapsconcentration) >= (maxcapacity){
            event.setFailed("无法继续添加");
        }
        else{
            map["Thconcentration"] = Thconcentration + 0.5;
        }
        event.controller.customData = data;
    })
    .addRecipeTooltip("向反应堆添加5%的钍-232燃料")
    .setThreadName("燃料注入") 
    .build();
    
RecipeBuilder.newBuilder("nuclear_input", "TMSR",2000)
    .addRecipeTooltip("每次反应消耗(1%x反应速率)钍燃料变为(1%x反应速率)铀燃料,每0.2%铀燃料变成0.2%核废料")
    .addCheckHandler(function(event as RecipeCheckEvent) {
        val data = event.controller.customData;
        var dData = D(data);
        val map = data.asMap();
        var ctrltion = dData.getLong("ctrltion" , 0);
        var Thconcentration = dData.getLong("Thconcentration", 0);
        var Uconcentration = dData.getLong("Uconcentration" , 0);
        var capacity = dData.getList("capacity" , 0);
        map["Thconcentration"] = Thconcentration - ctrltion * 1;
        map["Uconcentration"] = Uconcentration +  ctrltion * 1;
        map["Uconcentration"] = Uconcentration - 0.2 ;
        map["capacity"] = capacity + 0.2;
    })
    .setThreadName("燃料反应进度")
    .build();

ln（中子通量x钍的百分比）x系数/温度+ln（中子通量x铀的百分比）x系数/温度

"初始中子通量为反应速率x5"
    .addRecipeTooltip("发热量与燃料消耗速度取决于中子通量")
    .addRecipeTooltip("中子通量计算公式为:{0.3 x ln[中子通量/(钍浓度+铀浓度)] x 钍浓度 + 0.5 x ln[(中子通量/钍浓度+铀浓度)x铀浓度]}x C x ln(300/(当前热量-300)+2.7)+5 x C")
    .addRecipeTooltip("产热公式为:中子通量x0.95x(当前热量+300)/300")